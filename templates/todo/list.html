{% extends "base.html" %}
{% load static %}
{% block content %}

<div class="todocontainer"></div>
  <!-- {% for todo in todos %}
    <div class = "todo-item">
      <p>{{ todo.name }}</p>
      <P>{{ todo.description }}</P>
      <P>{{ todo.complete }}</P>
      <P>{{ todo.completed_at }}</P>
      <P>{{ todo.exp }}</P>
      <hr>
    </div>
  {% empty %}
      <p>ë“±ë¡ëœ í•  ì¼ì´ ì—†ìŠµë‹ˆë‹¤.</p>
  {% endfor %} -->

<button class="todoCreate" id = "createBtn"> Todo ë“±ë¡í•˜ê¸°</button>

<!-- <script> 
// ì—­í• : ì›¹í˜ì´ì§€ê°€ ì™„ì „íˆ ë¡œë“œë˜ì—ˆì„ ë•Œ ì‹¤í–‰ë©ë‹ˆë‹¤.

// ì§€ê¸ˆ í•˜ëŠ” ì¼: ê·¸ëƒ¥ "list loading"ì´ë¼ëŠ” ë¡œê·¸ë§Œ ì°ìŠµë‹ˆë‹¤.

// ì˜ˆì •ëœ ì¼: ë‚˜ì¤‘ì— ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ í™”ë©´ì— ë¦¬ìŠ¤íŠ¸ë¥¼ ë³´ì—¬ì£¼ëŠ” ì½”ë“œ(API í˜¸ì¶œ ë“±)ë¡œ ë°”ê¿”ì•¼ í•©ë‹ˆë‹¤.
    document.addEventListener("DOMContentLoaded", function(){
      console.log("list loading")
    });

// âœ… ì—­í• : idê°€ "createBtn"ì¸ ë²„íŠ¼ì„ ì‚¬ìš©ìê°€ í´ë¦­í–ˆì„ ë•Œ ì‹¤í–‰ë©ë‹ˆë‹¤.

// âœ… ì§€ê¸ˆ í•˜ëŠ” ì¼: ì½˜ì†”ì— "createBtn click!!"ë§Œ ì¶œë ¥.

// ğŸ”œ ì˜ˆì •ëœ ì¼: ì„œë²„ì— ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ì „ì†¡(post) í•˜ëŠ” ì½”ë“œë¡œ ë°”ë€” ì˜ˆì •ì…ë‹ˆë‹¤.


    document.getElementById("createBtn").addEventListener("click", () => {
      console.log("createBtn click!!")
    });

</script> -->

<script>  
// 1. ë¬¸ì„œê°€ ì™„ì „íˆ ë¡œë“œë˜ë©´ ì´ˆê¸°í™” í•¨ìˆ˜ init()ì„ ì‹¤í–‰í•©ë‹ˆë‹¤. //
document.addEventListener("DOMContentLoaded", init); 
// í˜ì´ì§€ê°€ ì™„ì „íˆ ë¡œë“œë˜ë©´(DomContentLoadedëŠ” **"HTMLì´ ì™„ì „íˆ ë¡œë“œëì„ ë•Œ ì‹¤í–‰í•˜ë¼"**ëŠ” ëœ»)init í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. //

// 2. UI ì´ë²¤íŠ¸ / ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤. // ì´ˆê¸°í™”: UI ì´ë²¤íŠ¸ ì—°ê²° ë° ì²« í˜ì´ì§€ Todo ëª©ë¡ ë¡œë“œ
function init() {
    UIEvents(); // ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ì´ë²¤íŠ¸ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.  âœ â€œë²„íŠ¼ í´ë¦­, ì…ë ¥ì°½ ë“± ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì— í•„ìš”í•œ ì´ë²¤íŠ¸ ì„¤ì •ì„ ì‹œì‘í•´!â€ (2-1)
    loadTodoList(); // todo ëª©ë¡ì„ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤. ë°ì´í„°ê°€ 10ê°œ ì´ìƒì¼ ë•ŒëŠ” í˜ì´ì§€ë„¤ì´ì…˜ì„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤. í˜ì´ì§€ë„¤ì´ì…˜ì„ ìœ„í•´ì„œëŠ” ê°œë³„ í•¨ìˆ˜ê°€ í•„ìš”
}

//2-1. UI ì´ë²¤íŠ¸ ë°”ì¸ë”©: "Todo ë“±ë¡í•˜ê¸°" ë²„íŠ¼ í´ë¦­ ì‹œ ë“±ë¡ í˜ì´ì§€ë¡œ ì´ë™
function UIEvents() {
    // 1. todo ë“±ë¡ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
    document.getElementById("createBtn")
    .addEventListener("click", onCreateClick);
    // "createBtn"ì´ë¼ëŠ” IDë¥¼ ê°€ì§„ ë²„íŠ¼ì„ í´ë¦­í–ˆì„ ë•Œ onCreateClick í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. //
}
//2-1-1. ë“±ë¡ ë²„íŠ¼ í´ë¦­ ì‹œ /todo/create/ë¡œ ì´ë™
function onCreateClick() {
  window.location.href = "/todo/create/";
}

// ë¦¬ìŠ¤íŠ¸ ë¡œë“œ & ë°ì´í„° ì²˜ë¦¬
// ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°, íŠ¹ì • ëª©ë¡ì„ í´ë¦­(pkê°€ í´ë¦­í•  ìˆ˜ ìˆê²Œ í•˜ì—¬ ë§í¬ ì´ë™)
// í˜ì´ì§€ë„¤ì´ì…˜ì€ viewsetì´ë‘ ì–´ìš¸ë ¤ ì •ì˜ë§Œ í•  ì˜ˆì •
// ì§€ì •í•œ í˜ì´ì§€ ë²ˆí˜¸ì˜ Todo ëª©ë¡ì„ ì„œë²„ì—ì„œ ë°›ì•„ì™€ì„œ í™”ë©´ì— ë„£ì–´ì¤€ë‹¤. 

//3. ì„œë²„ì—ì„œ Todo ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
function loadTodoList(){// í˜ì´ì§€ë„¤ì´ì…˜ì„ ê³ ë ¤í•˜ì—¬ í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ìŠµë‹ˆë‹¤.
  fetchTodoData() //fetchTodoData()ë¼ëŠ” í•¨ìˆ˜ì— page ê°’ì„ ë„£ì–´ì„œ ì„œë²„ì— ë°ì´í„° ìš”ì²­ì„ í•˜ëŠ” ê±°ì˜ˆìš”. (3-1)
  .then(data => { // dataë¥¼ ë°›ì•„ì„œ ì¤‘ê´„í˜¸ì— ë„£ì–´ì„œ ì½”ë“œ ì‹¤í–‰í•´ë¼    //ë°›ì•„ì˜¨ ë°ì´í„°ì—ì„œ ì‹¤ì œ todo í•­ëª©ë§Œ êº¼ëƒ„
    const todos = extractTodoArray(data); // ì„œë²„ì—ì„œ ë°›ì•„ì˜¨ ë°ì´í„° ì¤‘ todo í•­ëª©ë§Œ ì¶”ì¶œí•œ ë°°ì—´ì…ë‹ˆë‹¤. (constant) ìƒìˆ˜ë¼ì„œ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ë°”ê¿€ ìˆ˜ ì—†ê²Œ ë§Œë“¬ (ë³€ìˆ˜ = [] forë¬¸ ëŒë ¤ì„œ ë¹ˆê·¸ë¦‡ì— ë„£ëŠ” ê²ƒê³¼ ë¹„ìŠ·) (3-2)
    renderTodoList(todos); // êº¼ë‚¸ todo í•­ëª©ì„ í™”ë©´ì— ë³´ì—¬ì£¼ëŠ” í•¨ìˆ˜ í˜¸ì¶œ // todosëŠ” ì„œë²„ì—ì„œ ë°›ì•„ì˜¨ ë°ì´í„° ì¤‘ todo í•­ëª©ë§Œ ì¶”ì¶œí•œ ë°°ì—´ì…ë‹ˆë‹¤. (3-3)
    // renderPagination(data, page); // 3-4. í˜ì´ì§€ë„¤ì´ì…˜ í‘œì‹œ
  })
  .catch(err => console.error("ë¦¬ìŠ¤íŠ¸ ë¡œë“œ ì‹¤íŒ¨", err));
}

// 3-1 axiosë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë²„ì—ì„œ todo ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
// í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì•„ì„œ í•´ë‹¹ í˜ì´ì§€ì˜ ë°ì´í„°ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤.
function fetchTodoData() {
  return axiosInstance.get(`/api/list/`).then(response => response.data);// cdn.jsdelivr.net/npm/axios/dist/axios.min.jsë¥¼ í†µí•´ ë¶ˆëŸ¬ì˜¨ axios ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. // returnì„ í†µí•´ ì„ì‹œì €ì¥í•˜ì—¬ ì¶”í›„ì— ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.
     // í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•˜ì—¬ í•´ë‹¹ í˜ì´ì§€ì˜ ë°ì´í„°ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤. // axiosInstanceë¥¼ ì‚¬ìš©í•˜ì—¬ GET ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤. ì´ ì¸ìŠ¤í„´ìŠ¤ëŠ” ë¯¸ë¦¬ ì„¤ì •ëœ ê¸°ë³¸ URLê³¼ í—¤ë”ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.
    // .get(`/todo/generic/list/?page=${page}`) ì œë„ˆë¦­ ë°©ì‹
    // .get(`/todo/viewset/view/?page=${page}`) ë·°ì…‹ ë°©ì‹
     // ì‘ë‹µì—ì„œ ë°ì´í„° ë¶€ë¶„ë§Œ ì¶”ì¶œ
}

//3-2. ì„œë²„ì—ì„œ ë°›ì€ ë°ì´í„°ì—ì„œ todo í•­ëª©ë§Œ ì¶”ì¶œí•˜ëŠ” í•¨ìˆ˜ (API ì‘ë‹µ í˜•ì‹ì— ë”°ë¼ Todo ë°°ì—´ ì¶”ì¶œ)
// function extractTodoArray(data) {
//     // 1) CustomPageNumberPagination ì‚¬ìš© ì‹œ
//     if (Array.isArray(data.data)) {
//         return data.data;
//     }
//     // 2) ê¸°ë³¸ PageNumberPagination ì‚¬ìš© ì‹œ
//     if (Array.isArray(data.results)) {
//         return data.results;
//     }
//     // 3) Pagination ì—†ì´ ìˆœìˆ˜ ë°°ì—´ ë¦¬í„´ ì‹œ --> ì—¬ê¸°ì„œ ì‚¬ìš©
//     if (Array.isArray(data)) {
//         return data;
//     }
//     return [];
function extractTodoArray(data) {
  // ì„œë²„ì—ì„œ ë°›ì€ ë°ì´í„°ì—ì„œ todo í•­ëª©ë§Œ ì¶”ì¶œí•©ë‹ˆë‹¤.
  // ì˜ˆì‹œ: dataê°€ { results: [...], count: 10, next: null, previous: null } í˜•íƒœì¼ ë•Œ results ë°°ì—´ì„ ë°˜í™˜
  if(Array.isArray(data)) return data;  //ë©”ì„œë“œë¡œì„œ ë°ì´í„°ê°€ ë°°ì—´ì¸ì§€ ì•„ë‹Œì§€ íŒë³„
  return[]; // resultsê°€ ì—†ìœ¼ë©´ ë¹ˆ ë°°ì—´ì„ ë°˜í™˜í•©ë‹ˆë‹¤.
}

//3.3 ì„œë²„ì—ì„œ ë°›ì•„ì˜¨ todo í•­ëª©ì„ í™”ë©´ì— í‘œì‹œí•˜ëŠ” (í•¨ìˆ˜ ì¶”ì¶œëœ Todo í•­ëª©ë“¤ì„ í™”ë©´ì— ë Œë”ë§)
function renderTodoList(todos) {
  const container = document.querySelector(".todocontainer"); // .todocontainer í´ë˜ìŠ¤ë¥¼ ê°€ì§„ ìš”ì†Œë¥¼ ì„ íƒí•©ë‹ˆë‹¤. .todocontainer{} ë‘ ê°™ìŒ / ìƒˆë¡œìš´ ìš”ì†Œë¥¼ ë§Œë“¤ì§€ ì•Šê³  ê¸°ì¡´ ìš”ì†Œë¥¼ ì„ íƒí•˜ì—¬ ì‚¬ìš©í•©ë‹ˆë‹¤. //
  // containerëŠ” todo í•­ëª©ì„ í‘œì‹œí•  ì˜ì—­ì…ë‹ˆë‹¤.
  container.innerHTML = ""; // ê¸°ì¡´ ë‚´ìš©ì„ ë¹„ì›ë‹ˆë‹¤.
  todos.forEach(todo => 
    container.appendChild(createTodoElement(todo))
  ); // ê° todo í•­ëª©ì„ í™”ë©´ì— ì¶”ê°€í•©ë‹ˆë‹¤. // forEachëŠ” ë°°ì—´ì˜ ê° ìš”ì†Œì— ëŒ€í•´ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ë©”ì„œë“œì…ë‹ˆë‹¤. // createTodoItem(todo) í•¨ìˆ˜ëŠ” todo í•­ëª©ì„ HTML ìš”ì†Œë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.
}

// 3-3-1. ë‹¨ì¼ Todo ê°ì²´ë¥¼ HTML ìš”ì†Œë¡œ ìƒì„±
function createTodoElement(todo) {
  // todo í•­ëª©ì„ HTML ìš”ì†Œë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
  const div = document.createElement("div"); // ìƒˆë¡œìš´ div ìš”ì†Œë¥¼ ìƒì„±í•©ë‹ˆë‹¤. //
  div.className = "todo-item"; // ìƒì„±í•œ divì— í´ë˜ìŠ¤ ì´ë¦„ì„ ì¶”ê°€í•©ë‹ˆë‹¤
  // divëŠ” ê° todo í•­ëª©ì„ í‘œì‹œí•  ì˜ì—­ì…ë‹ˆë‹¤.
  // divëŠ” todo í•­ëª©ì˜ ì •ë³´ë¥¼ ë‹´ëŠ” ì»¨í…Œì´ë„ˆ ì—­í• ì„ í•©ë‹ˆë‹¤.

  // ì™„ë£Œëœ í•­ëª©ì´ë©´ ë°‘ì¤„ ì ìš© ".todo-item.completed {}" í•¨ìˆ˜ë¥¼ CSSë¡œ ì •ì˜í•˜ì—¬ ìŠ¤íƒ€ì¼ì„ ì ìš©í•©ë‹ˆë‹¤.
  if (todo.complete) {
    div.classList.add("completed"); // ì™„ë£Œëœ í•­ëª©ì—ëŠ” "completed" í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.(".todo-item.completed {}"ë¡œ ìŠ¤íƒ€ì¼ë¡œ ë„˜ì–´ê°ˆ ìˆ˜ ìˆìŒ) // ì™„ë£Œëœ í•­ëª©ì„ ì‹œê°ì ìœ¼ë¡œ êµ¬ë¶„í•˜ê¸° ìœ„í•´ ìŠ¤íƒ€ì¼ì„ ì ìš©í•©ë‹ˆë‹¤.
    } 
  else {
    div.classList.remove("completed"); // ì™„ë£Œë˜ì§€ ì•Šì€ í•­ëª©ì—ì„œëŠ” "completed" í´ë˜ìŠ¤ë¥¼ ì œê±°í•©ë‹ˆë‹¤.
    }

  div.addEventListener('click', () => detailView(todo.id)); // ëª©ë¡ í´ë¦­ ì‹œ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ” ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. 
  // todo.idëŠ” í´ë¦­í•œ todo í•­ëª©ì˜ ê³ ìœ  IDì…ë‹ˆë‹¤. // ì´ IDë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤. // 3-3-3. ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ” í•¨ìˆ˜ detailView(id)ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.

  // HTML ë‚´ìš© ì„¤ì • 
  div.innerHTML = ` 
    <p><strong>Name:</strong> ${todo.name}</p>
    <p><strong>Description:</strong> ${todo.description}</p>
    <p><strong>Complete:</strong> ${todo.complete}</p>
    <p><strong>Completed At:</strong> ${datetimeToString(todo.completed_at)}</p>
    <p><strong>Experience Points:</strong> ${todo.exp}</p>
    <button class="completeBtn">ì™„ë£Œ</button>
    <hr>
  `; // backtick(``)ì„ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ ì¤„ì˜ HTMLì„ ì‘ì„±í•©ë‹ˆë‹¤. (= f" " ì™€ ê°™ì€ êµ¬ì¡°) // todo í•­ëª©ì˜ ì •ë³´ë¥¼ í‘œì‹œí•˜ëŠ” HTML êµ¬ì¡°ë¥¼ ë§Œë“­ë‹ˆë‹¤. // todo.completed_atì€ ë‚ ì§œ/ì‹œê°„ í˜•ì‹ìœ¼ë¡œ ë˜ì–´ ìˆìœ¼ë¯€ë¡œ datetimeToString í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ í•œêµ­ ì‹œê°„ëŒ€ì˜ ë¬¸ìì—´ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.

  // ì™„ë£Œ ë²„íŠ¼ í´ë¦­ì‹œ ì™„ë£Œ API í˜¸ì¶œ
  div.querySelector(".completeBtn").addEventListener("click", e => {
    // ì™„ë£Œ ë²„íŠ¼ í´ë¦­ ì‹œ ì²˜ë¦¬
    e.stopPropagation(); // ì´ë²¤íŠ¸ ì „íŒŒë¥¼ ë§‰ìŠµë‹ˆë‹¤. // ì´ë²¤íŠ¸ê°€ ìƒìœ„ ìš”ì†Œë¡œ ì „íŒŒë˜ëŠ” ê²ƒì„ ë°©ì§€í•©ë‹ˆë‹¤.
    toComplete(todo.id); // toComplete í•¨ìˆ˜ëŠ” todo í•­ëª©ì„ ì™„ë£Œ ìƒíƒœë¡œ ë³€ê²½í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. // todo.idëŠ” ì™„ë£Œí•  todo í•­ëª©ì˜ ê³ ìœ  IDì…ë‹ˆë‹¤. function tocomplete(id) ì† idì™€ ê°™ì€ ì—­í• ì„ í•©ë‹ˆë‹¤.
  });

return div; // ìƒì„±í•œ div ìš”ì†Œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. // ì´ divëŠ” todo í•­ëª©ì˜ ì •ë³´ë¥¼ ë‹´ê³  ìˆìŠµë‹ˆë‹¤. (3-3-1 divì˜ ê°’ ë°˜í™˜)
}

// 3-3-2. ì™„ë£Œ ë²„íŠ¼ í´ë¦­ ì‹œ todo í•­ëª©ì„ ì™„ë£Œ ìƒíƒœë¡œ ë³€ê²½í•˜ëŠ” í•¨ìˆ˜
function toComplete(id){
  axiosInstance.patch(`api/update/${id}/`,{complete : true}) // axiosInstanceë¥¼ ì‚¬ìš©í•˜ì—¬ PATCH ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤. // modelì—ì„œ complete í•„ë“œë¥¼ trueë¡œ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
  .then(() => loadTodoList()) // ìš”ì²­ì´ ì„±ê³µí•˜ë©´ ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (false -> trueë¡œ ë³€ê²½ë˜ë©´ ì„œë²„ ì „ì†¡ -> í™”ë©´ì— í‘œì‹œ(loadTodoList() í•¨ìˆ˜ í˜¸ì¶œ))
  .catch(err => console.error("ì™„ë£Œ ì²˜ë¦¬ ì‹¤íŒ¨:", err)); // ìš”ì²­ì´ ì‹¤íŒ¨í•˜ë©´ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
}

// 3-3-3. ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™

function detailView(id) {
    window.location.href = `/todo/detail/${id}/`; // window ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¸Œë¼ìš°ì €ì˜ í˜„ì¬ URLì„ ë³€ê²½í•©ë‹ˆë‹¤. // idëŠ” ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™í•  todo í•­ëª©ì˜ ê³ ìœ  IDì…ë‹ˆë‹¤. // ì´ í•¨ìˆ˜ëŠ” todo í•­ëª©ì˜ ìƒì„¸ ì •ë³´ë¥¼ ë³´ì—¬ì£¼ëŠ” í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤. 
}




// // 3-4. í˜ì´ì§€ë„¤ì´ì…˜ êµ¬ì„± (â† ì´ì „, 1 2 3, â†’ ë‹¤ìŒ)
// function renderPagination(data, currentPage) {
//     const wrapper = document.querySelector('.pagination');
//     wrapper.innerHTML = '';

//     const totalPages = data.page_count;

//      // ì´ì „ í˜ì´ì§€ ë²„íŠ¼
//     const prevBtn = document.createElement('button');
//     prevBtn.innerText = 'â€¹';
//     prevBtn.disabled = !data.previous;
//     prevBtn.addEventListener('click', () => loadTodoList(currentPage - 1));
//     wrapper.appendChild(prevBtn);

//     // ê°œë³„ í˜ì´ì§€ ë²„íŠ¼ë“¤ ìƒì„±
//     for (let i = 1; i <= totalPages; i++) {
//         const btn = document.createElement('button');
//         btn.innerText = i;
//         if (i === currentPage) { //ì—„ê²©í•œë¹„êµ
//             btn.disabled = true;
//             btn.classList.add('active');  // CSSë¡œ .active ìŠ¤íƒ€ì¼ ì§€ì •
//         }
//         btn.addEventListener('click', () => loadTodoList(i));
//         wrapper.appendChild(btn);
//     }

//     // ë‹¤ìŒ í˜ì´ì§€ ë²„íŠ¼
//     const nextBtn = document.createElement('button');
//     nextBtn.innerText = 'â€º';
//     nextBtn.disabled = !data.next;
//     nextBtn.addEventListener('click', () => loadTodoList(currentPage + 1));
//     wrapper.appendChild(nextBtn);
// }

// // 3-5. ë‚ ì§œ/ì‹œê°„ì„ í•œêµ­ ì‹œê°„ëŒ€ì˜ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
// function datetimeToString(datetime){ // datetimeì„ í•œêµ­ ì‹œê°„ëŒ€ì˜ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
//     if (!datetime) return "-"; // datetimeì´ ì—†ìœ¼ë©´ "-"ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
//     const date = new Date(datetime); // datetime ë¬¸ìì—´ì„ Date ê°ì²´ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
//     return date.toLocaleString("ko-KR", { timeZone: "Asia/Seoul" }); 
// } 

</script>
{% endblock %}